<!DOCTYPE html>
<html><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>Orienteering</title>
    <script src="./js/jquery.min.js"></script>
    <script src="./js/jspsych.js"></script>
    <script src="./js/plugins/jspsych-html-keyboard-response.js"></script>
    <script src="./js/plugins/jspsych-external-html.js"></script>
    <script src="./js/plugins/jspsych-instructions.js"></script>
    <link href="./js/css/jspsych.css" rel="stylesheet" type="text/css"></link>
  </head>
  <body>
  </body>
  <script>
    
// #################  create timeline  #################
var timeline = [];  // The last thing we do is to run it!


// #################  The demographics screen  #################
var check_consent = function(elem) {
      // get the value of a radio button
        function getRadioButton(name) {
            var i, radios = document.getElementsByName(name);
            for (i = 0; i < radios.length; i = i + 1) {
                if (radios[i].checked) {
                    return (radios[i].value);
                }
            }
          
        }

        jsPsych.data.addProperties( {
	    gender: getRadioButton("gender"),
        age: document.getElementById("age").value,
        language: document.getElementById("language").value,
        country: document.getElementById("country").value,
        experience: getRadioButton("experience").value,
        handedness: getRadioButton("handedness").value,
        mapholding: getRadioButton("mapholding").value,
        })

        // Effectively checks to ensure that we have valid inforamtion in all fields
        // won't let you move forward unless all boxes have an answer

    return true
};

        
// generate a random subject ID with 15 characters
var subject_id = jsPsych.randomization.randomID(15);

// pick a random condition for the subject at the start of the experiment
var condition_assignment = jsPsych.randomization.sampleWithoutReplacement(['conditionA', 'conditionB', 'conditionC'], 1)[0];

// record the condition assignment in the jsPsych data
// this adds a property called 'subject' and a property called 'condition' to every trial
jsPsych.data.addProperties({
  subject: subject_id,
  condition: condition_assignment


    });

    var introduction = {
      type:'external-html',
      url: "./doc/demographics_page.html",
      cont_btn: "demographics_done",
      check_fn: check_consent
      };



     

 // #################  run timeline  #################
    jsPsych.init ({
        timeline: [introduction]  // Oooh yes, now we run the time line
    });


   </script>
</html>
